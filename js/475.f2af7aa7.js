"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[475],{8475:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[e.isLoading?t("Spinner"):[t("div",{staticClass:"main-container main-container-weatherfilter overflow-default-hidden"},[t("div",{staticClass:"title-wrapper"},[t("h1",[e._v("天氣條件檢索")])]),t("div",{staticClass:"filter-control-wrapper"},[t("form",{staticClass:"filterConditions-wrapper"},[t("div",{staticClass:"form-row"},[t("label",{staticClass:"form-label"},[e._v("日期")]),t("div",{staticClass:"select-wrapper"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.filterConditions.date,expression:"filterConditions.date"}],staticClass:"form-select",attrs:{name:"a-type",id:"a-type",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.filterConditions,"date",t.target.multiple?a:a[0])}}},[t("option",{attrs:{selected:""},domProps:{value:0}},[e._v(e._s(e.datasetOneWeek.locations.location[0].weatherElement[3].time[0].startTime.slice(0,10))+" ")]),e._l(6,(function(a){return t("option",{key:a,domProps:{value:a}},[e._v(e._s(e.datasetOneWeek.locations.location[0].weatherElement[3].time[a].startTime.slice(0,10))+" ")])}))],2)])]),t("label",{staticClass:"form-label",attrs:{for:"highestTemperature"}},[e._v("最高溫(小於等於)")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filterConditions.highestTemperature.value,expression:"filterConditions.highestTemperature.value"}],staticClass:"form-control",attrs:{id:"highestTemperature",type:"number",min:"-20",max:"50"},domProps:{value:e.filterConditions.highestTemperature.value},on:{input:function(t){t.target.composing||e.$set(e.filterConditions.highestTemperature,"value",t.target.value)}}}),t("label",{staticClass:"form-label",attrs:{for:"lowestTemperature"}},[e._v("最低溫(大於等於)")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filterConditions.lowestTemperature.value,expression:"filterConditions.lowestTemperature.value"}],staticClass:"form-control",attrs:{id:"lowestTemperature",type:"number",min:"-20",max:"50"},domProps:{value:e.filterConditions.lowestTemperature.value},on:{input:function(t){t.target.composing||e.$set(e.filterConditions.lowestTemperature,"value",t.target.value)}}}),t("label",{staticClass:"form-label",attrs:{for:"rainrate"}},[e._v("降雨機率(小於等於)")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filterConditions.rainrate.value,expression:"filterConditions.rainrate.value"}],staticClass:"form-control",attrs:{id:"rainrate",type:"number",min:"0",max:"100"},domProps:{value:e.filterConditions.rainrate.value},on:{input:function(t){t.target.composing||e.$set(e.filterConditions.rainrate,"value",t.target.value)}}})]),t("button",{staticClass:"btn btn-primary",on:{click:e.filter}},[e._v("Filter")])]),e.filterMountains.length>0?[t("table",{staticClass:"main-table"},[t("thead",{staticClass:"table-header"},[t("tr",{staticClass:"table-row"},[t("th",{staticClass:"table-cell table-cell-name"}),e._l(e.filterMountains[0].weatherElement[3].time,(function(a){return t("th",{key:"date"+a.startTime,staticClass:"table-cell table-cell-each-day"},[t("div",[e._v(e._s(a.startTime.slice(0,10)))]),t("div",[t("div",[e._v("最高溫")]),t("div",[e._v("最低溫")]),t("div",[e._v("降雨機率")]),t("div",[e._v("天氣現象")])])])}))],2)]),t("tbody",{staticClass:"table-body"},e._l(e.filterMountains,(function(a){return t("tr",{key:a.parameterSet.parameter.parameterValue,staticClass:"table-row"},[t("td",{staticClass:"table-cell table-cell-name"},[t("router-link",{staticClass:"link",attrs:{to:"/mountain/"+a.parameterSet.parameter.parameterValue}},[e._v(" "+e._s(a.locationName)+" ")])],1),e._l(7,(function(i){return t("td",{key:i,staticClass:"table-cell table-cell-each-day"},[t("div",[t("div",[e._v(e._s(a.weatherElement[3].time[i-1].elementValue.value)+"°C")]),t("div",[e._v(e._s(a.weatherElement[4].time[i-1].elementValue.value)+"°C")]),t("div",[e._v(e._s(a.weatherElement[9].time[i-1].elementValue.value||"NA")+"%")]),t("div",[t("img",{attrs:{src:"https://www.cwb.gov.tw/V8/assets/img/weather_icons/weathers/svg_icon/day/"+a.weatherElement[12].time[i-1].elementValue[1].value+".svg",title:a.weatherElement[12].time[i-1].elementValue[0].value,alt:a.weatherElement[12].time[i-1].elementValue[0].value}})])])])}))],2)})),0)])]:e._e()],2)]],2)},r=[],l=(a(1703),a(7877)),s=a(6005),n=a(6163),o={components:{Spinner:s.Z},data(){return{dataCategory:{oneWeek:"F-B0053-031",oneWeekDayNight:"F-B0053-033",perThreeHours:"F-B0053-035"},dataType:"JSON",datasetOneWeek:{locations:{location:[]}},isLoading:!0,filterMountains:[],filterConditions:{date:0,highestTemperature:{value:30,index:3},lowestTemperature:{value:20,index:4},rainrate:{value:50,index:9}}}},methods:{async fetchDatasetOneWeek(){try{this.isLoading=!0;const e=this.dataCategory.oneWeek,t=this.dataType,a=await l.Z.getWeatherData({dataCategory:e,dataType:t});if(200!==a.status)throw new Error;this.datasetOneWeek={...a.data.dataset},this.isLoading=!1}catch(e){this.isLoading=!1,console.warn(e)}},filter(){n.F.fire({icon:"warning",title:"檢索中"}),this.removeOverflowHidden(),this.filterMountains=[];let e=this.filterConditions.date;this.datasetOneWeek.locations.location.forEach((t=>{Number(t.weatherElement[3].time[e].elementValue.value)<=Number(this.filterConditions.highestTemperature.value)&&Number(t.weatherElement[4].time[e].elementValue.value)>=Number(this.filterConditions.lowestTemperature.value)&&Number(t.weatherElement[9].time[e].elementValue.value)<=Number(this.filterConditions.rainrate.value)&&this.filterMountains.push(t)})),0===this.filterMountains.length?n.F.fire({icon:"error",title:"檢索完成，無匹配結果"}):n.F.fire({icon:"success",title:"檢索完成"})},removeOverflowHidden(){const e=document.querySelector(".main-container-weatherfilter");e.classList.remove("overflow-default-hidden"),e.classList.add("overflow-scroll")}},mounted(){this.fetchDatasetOneWeek()}},u=o,m=a(1001),d=(0,m.Z)(u,i,r,!1,null,null,null),c=d.exports}}]);
//# sourceMappingURL=475.f2af7aa7.js.map